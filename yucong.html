<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>良渚古玉</title>
  <link rel="stylesheet" href="css/yucong.css">
</head>

<body>
  <div class="contanior">
    <img src="res/bg3.jpg" alt="">
    <div class="kuang">
      <img src="res/title.png" alt="">
    </div>
    <div class="title">
      <img src="res/makeyc.png" alt="">
    </div>
    <div class="word3">
      请将对应的工具及玉石移到中间工具台上。（按要求找到工具及玉石并放置正确才能进行下一步）
    </div>
    <div class="first tips" id="one">
      请找出合适的工具完成原石的切割。
    </div>
    <div class="second tips" id="two">
      请找出合适的工具完成原石进一步的切割。
    </div>
    <div class="third tips" id="three">
      请找出合适的工具对原石钻洞。
    </div>
    <div class="fourth tips" id="four">
      请找出合适的工具对洞打磨。
    </div>
    <div class="fifth tips" id="five">
      请找出合适的工具将玉石研磨切割出大致形态。
    </div>
    <div class="sixth tips" id="six">
      请找出合适的工具完成玉琮线条的切割（两个）。
    </div>
    <div class="gzt">
      <img src="res/gzt.png" alt="">
    </div>
    <div class="make">
      <img src="res/m1.png" alt="" class="m1">
      <img src="res/m2.png" alt="" class="m2">
      <img src="res/m3.png" alt="" class="m3">
      <img src="res/m4.png" alt="" class="m4">
      <img src="res/m5.png" alt="" class="m5">
      <img src="res/m6.png" alt="" class="m6">
      <img src="res/g1.jpg" alt="" class="s1">
      <img src="res/g2.png" alt="" class="s2">
      <img src="res/g3.png" alt="" class="s3">
      <img src="res/g4.png" alt="" class="s4">
      <img src="res/g5.png" alt="" class="s5">
      <img src="res/g6.png" alt="" class="s6">
      <img src="res/g7.png" alt="" class="s7">
    </div>
    <div class="back1" onclick="goback1()" title="返回主菜单">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door"
        viewBox="0 0 16 16">
        <path
          d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146ZM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5Z" />
      </svg>
    </div>
    <div class="back2" onclick="goback2()" title="返回玉器菜单">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-circle"
        viewBox="0 0 16 16">
        <path fill-rule="evenodd"
          d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z" />
      </svg>
    </div>
    <div class="word4">

    </div>
  </div>
</body>
<script>
  let img1 = document.querySelector('.m1');
  let img2 = document.querySelector('.m2');
  let img3 = document.querySelector('.m3');
  let img4 = document.querySelector('.m4');
  let img5 = document.querySelector('.m5');
  let img6 = document.querySelector('.m6');
  let g1 = document.querySelector('.s1');
  let g2 = document.querySelector('.s2');
  let g3 = document.querySelector('.s3');
  let g4 = document.querySelector('.s4');
  let g5 = document.querySelector('.s5');
  let g6 = document.querySelector('.s6');
  let g7 = document.querySelector('.s7');
  let s1 = document.querySelector('#one');
  let s2 = document.querySelector('#two');
  let s3 = document.querySelector('#three');
  let s4 = document.querySelector('#four');
  let s5 = document.querySelector('#five');
  let s6 = document.querySelector('#six');
  let active = [false, false, false, false, false, false, false, false, false, false, false, false, false];
  let currentX = [];
  let currentY = [];
  let initialX = [];
  let initialY = [];
  let xOffset = [img1.offsetLeft, img2.offsetLeft, img3.offsetLeft, img4.offsetLeft, img5.offsetLeft,
  img6.offsetLeft, g1.offsetLeft, g2.offsetLeft, g3.offsetLeft, g4.offsetLeft, g5.offsetLeft,
  g6.offsetLeft, g7.offsetLeft];
  let yOffset = [img1.offsetTop, img2.offsetTop, img3.offsetTop, img4.offsetTop, img5.offsetTop,
  img6.offsetTop, g1.offsetTop, g2.offsetTop, g3.offsetTop, g4.offsetTop, g5.offsetTop,
  g6.offsetTop, g7.offsetTop];

  img1.addEventListener('mousedown', dragStart, false);
  img2.addEventListener('mousedown', dragStart, false);
  img3.addEventListener('mousedown', dragStart, false);
  img4.addEventListener('mousedown', dragStart, false);
  img5.addEventListener('mousedown', dragStart, false);
  img6.addEventListener('mousedown', dragStart, false);
  g1.addEventListener('mousedown', dragStart, false);
  g2.addEventListener('mousedown', dragStart, false);
  g3.addEventListener('mousedown', dragStart, false);
  g4.addEventListener('mousedown', dragStart, false);
  g5.addEventListener('mousedown', dragStart, false);
  g6.addEventListener('mousedown', dragStart, false);
  g7.addEventListener('mousedown', dragStart, false);
  document.addEventListener('mouseup', dragEnd, false);
  document.addEventListener('mousemove', drag, false);
  function dragStart(e) {
    if (e.target === img1) {
      active[0] = true;
    } else if (e.target === img2) {
      active[1] = true;
    } else if (e.target === img3) {
      active[2] = true;
    } else if (e.target === img4) {
      active[3] = true;
    } else if (e.target === img5) {
      active[4] = true;
    } else if (e.target === img6) {
      active[5] = true;
    } else if (e.target === g1) {
      active[6] = true;
    } else if (e.target === g2) {
      active[7] = true;
    } else if (e.target === g3) {
      active[8] = true;
    } else if (e.target === g4) {
      active[9] = true;
    } else if (e.target === g5) {
      active[10] = true;
    } else if (e.target === g6) {
      active[11] = true;
    } else if (e.target === g7) {
      active[12] = true;
    }
    for (var i = 0; i < active.length; i++) {
      if (active[i]) {
        initialX[i] = e.clientX - xOffset[i];
        initialY[i] = e.clientY - yOffset[i];
      }
    }
  }

  function dragEnd(e) {
    for (var i = 0; i < active.length; i++) {
      initialX[i] = currentX[i];
      initialY[i] = currentY[i];
      active[i] = false;
    }
  }

  function drag(e) {
    for (var i = 0; i < active.length; i++) {
      if (active[i]) {
        e.preventDefault();
        currentX[i] = e.clientX - initialX[i];
        currentY[i] = e.clientY - initialY[i];

        xOffset[i] = currentX[i];
        yOffset[i] = currentY[i];
        if (i + 1 <= 6) {
          setTranslate(currentX[i], currentY[i], document.querySelector('.m' + (i + 1)));
        } else {
          setTranslate(currentX[i], currentY[i], document.querySelector('.s' + (i - 5)));
        }

      }
    }

  }

  function setTranslate(xPos, yPos, el) {
    //el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
    //var l = parseInt(el.style.left || 0) + xPos;
    // r = parseInt(el.style.right || 0) + yPos;
    el.style.left = xPos + "px";
    el.style.top = yPos + "px";
    panduan();
  }
  var word4 = document.querySelector(".word4")
  function panduan() {
    //console.log(s1.style.opacity)
    if (window.getComputedStyle(s1).opacity == '1') {
      if (check1()) {
        s1.style.opacity = "0";
        s2.style.opacity = "1";
        img1.style.opacity = "0";
        g1.style.opacity = "0";
        img1.style.zIndex = "-2"
        g1.style.zIndex = "-2"
        move(img2);
        word4.innerHTML = "恭喜你完成初步切割步骤！";
      }
    } else if (window.getComputedStyle(s2).opacity == '1') {
      if (check2()) {
        s2.style.opacity = "0";
        s3.style.opacity = "1";
        img2.style.opacity = "0";
        g2.style.opacity = "0";
        img2.style.zIndex = "-2";
        g2.style.zIndex = "-2";
        move(img3);
        word4.innerHTML = "恭喜你完成进一步切割步骤！";
      }
    } else if (window.getComputedStyle(s3).opacity == '1') {
      if (check3()) {
        s3.style.opacity = "0";
        s4.style.opacity = "1";
        img3.style.opacity = "0";
        g3.style.opacity = "0";
        img3.style.zIndex = "-2";
        g3.style.zIndex = "-2";
        move(img4);
        word4.innerHTML = "恭喜你完成钻洞步骤！";
      }
    } else if (window.getComputedStyle(s4).opacity == '1') {
      if (check4()) {
        s4.style.opacity = "0";
        s5.style.opacity = "1";
        img4.style.opacity = "0";
        g4.style.opacity = "0";
        img4.style.zIndex = "-2";
        g4.style.zIndex = "-2";
        move(img5);
        word4.innerHTML = "恭喜你完成研磨抛光洞步骤！";
      }
    } else if (window.getComputedStyle(s5).opacity == '1') {
      if (check5()) {
        s5.style.opacity = "0";
        s6.style.opacity = "1";
        img5.style.opacity = "0";
        g5.style.opacity = "0";
        img5.style.zIndex = "-2";
        g5.style.zIndex = "-2";
        move(img6);
        word4.innerHTML = "恭喜你完成初步研磨切割玉石步骤！";
      }
    } else if (window.getComputedStyle(s6).opacity == '1') {
      if (check6()) {
        g6.style.opacity = "0";
        g7.style.opacity = "0";
        g6.style.zIndex = "-2";
        g7.style.zIndex = "-2";
        word4.innerHTML = "恭喜你完成所有步骤！";
      }
    }
  }

  const gzt = document.querySelector(".gzt");
  const imgcheck = {
    left: gzt.offsetLeft,
    top: gzt.offsetTop,
    right: gzt.offsetLeft + gzt.offsetWidth,
    bottom: gzt.offsetTop + gzt.offsetHeight
  };
  function check1() {
    var imgc1 = {
      left: img1.offsetLeft,
      top: img1.offsetTop,
      right: img1.offsetLeft + img1.offsetWidth,
      bottom: img1.offsetTop + img1.offsetHeight
    };
    var imgc2 = {
      left: g1.offsetLeft,
      top: g1.offsetTop,
      right: g1.offsetLeft + g1.offsetWidth,
      bottom: g1.offsetTop + g1.offsetHeight
    };
    return ((!(imgcheck.right < imgc2.left ||
      imgcheck.bottom < imgc2.top ||
      imgcheck.left > imgc2.right ||
      imgcheck.top > imgc2.bottom)) && (!(imgcheck.right < imgc1.left ||
        imgcheck.bottom < imgc1.top ||
        imgcheck.left > imgc1.right ||
        imgcheck.top > imgc1.bottom)));
  }
  function check2() {
    var imgc1 = {
      left: img2.offsetLeft,
      top: img2.offsetTop,
      right: img2.offsetLeft + img2.offsetWidth,
      bottom: img2.offsetTop + img2.offsetHeight
    };
    var imgc2 = {
      left: g2.offsetLeft,
      top: g2.offsetTop,
      right: g2.offsetLeft + g2.offsetWidth,
      bottom: g2.offsetTop + g2.offsetHeight
    };
    return ((!(imgcheck.right < imgc2.left ||
      imgcheck.bottom < imgc2.top ||
      imgcheck.left > imgc2.right ||
      imgcheck.top > imgc2.bottom)) && (!(imgcheck.right < imgc1.left ||
        imgcheck.bottom < imgc1.top ||
        imgcheck.left > imgc1.right ||
        imgcheck.top > imgc1.bottom)));
  }
  function check3() {
    var imgc1 = {
      left: img3.offsetLeft,
      top: img3.offsetTop,
      right: img3.offsetLeft + img3.offsetWidth,
      bottom: img3.offsetTop + img3.offsetHeight
    };
    var imgc2 = {
      left: g3.offsetLeft,
      top: g3.offsetTop,
      right: g3.offsetLeft + g3.offsetWidth,
      bottom: g3.offsetTop + g3.offsetHeight
    };
    return ((!(imgcheck.right < imgc2.left ||
      imgcheck.bottom < imgc2.top ||
      imgcheck.left > imgc2.right ||
      imgcheck.top > imgc2.bottom)) && (!(imgcheck.right < imgc1.left ||
        imgcheck.bottom < imgc1.top ||
        imgcheck.left > imgc1.right ||
        imgcheck.top > imgc1.bottom)));
  }
  function check4() {
    var imgc1 = {
      left: img4.offsetLeft,
      top: img4.offsetTop,
      right: img4.offsetLeft + img4.offsetWidth,
      bottom: img4.offsetTop + img4.offsetHeight
    };
    var imgc2 = {
      left: g4.offsetLeft,
      top: g4.offsetTop,
      right: g4.offsetLeft + g4.offsetWidth,
      bottom: g4.offsetTop + g4.offsetHeight
    };
    return ((!(imgcheck.right < imgc2.left ||
      imgcheck.bottom < imgc2.top ||
      imgcheck.left > imgc2.right ||
      imgcheck.top > imgc2.bottom)) && (!(imgcheck.right < imgc1.left ||
        imgcheck.bottom < imgc1.top ||
        imgcheck.left > imgc1.right ||
        imgcheck.top > imgc1.bottom)));
  }
  function check5() {
    var imgc1 = {
      left: img5.offsetLeft,
      top: img5.offsetTop,
      right: img5.offsetLeft + img5.offsetWidth,
      bottom: img5.offsetTop + img5.offsetHeight
    };
    var imgc2 = {
      left: g5.offsetLeft,
      top: g5.offsetTop,
      right: g5.offsetLeft + g5.offsetWidth,
      bottom: g5.offsetTop + g5.offsetHeight
    };
    return ((!(imgcheck.right < imgc2.left ||
      imgcheck.bottom < imgc2.top ||
      imgcheck.left > imgc2.right ||
      imgcheck.top > imgc2.bottom)) && (!(imgcheck.right < imgc1.left ||
        imgcheck.bottom < imgc1.top ||
        imgcheck.left > imgc1.right ||
        imgcheck.top > imgc1.bottom)));
  }
  function check6() {
    var imgc1 = {
      left: img6.offsetLeft,
      top: img6.offsetTop,
      right: img6.offsetLeft + img6.offsetWidth,
      bottom: img6.offsetTop + img6.offsetHeight
    };
    var imgc2 = {
      left: g6.offsetLeft,
      top: g6.offsetTop,
      right: g6.offsetLeft + g6.offsetWidth,
      bottom: g6.offsetTop + g6.offsetHeight
    };
    var imgc3 = {
      left: g7.offsetLeft,
      top: g7.offsetTop,
      right: g7.offsetLeft + g7.offsetWidth,
      bottom: g7.offsetTop + g7.offsetHeight
    };
    return ((!(imgcheck.right < imgc2.left ||
      imgcheck.bottom < imgc2.top ||
      imgcheck.left > imgc2.right ||
      imgcheck.top > imgc2.bottom)) && (!(imgcheck.right < imgc1.left ||
        imgcheck.bottom < imgc1.top ||
        imgcheck.left > imgc1.right ||
        imgcheck.top > imgc1.bottom)) && (!(imgcheck.right < imgc3.left ||
          imgcheck.bottom < imgc3.top ||
          imgcheck.left > imgc3.right ||
          imgcheck.top > imgc3.bottom)));
  }

  function move(e) {
    e.style.zIndex = "10";
    e.style.opacity = "1";
  }
  function goback1() {
    location.href = "catalog.html";
  }

  function goback2() {
    location.href = "yuqi_catalog.html";
  }

</script>

</html>